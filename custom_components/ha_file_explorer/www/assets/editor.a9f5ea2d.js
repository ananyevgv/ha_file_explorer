var f=Object.defineProperty,m=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var l=(e,t,o)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,i=(e,t)=>{for(var o in t||(t={}))v.call(t,o)&&l(e,o,t[o]);if(c)for(var o of c(t))k.call(t,o)&&l(e,o,t[o]);return e},u=(e,t)=>m(e,p(t));import{d as _,k as w,z as C,A as y,B as D,a as h,o as b,c as B,w as a,b as r,h as d,t as g,e as $}from"./index.94e53bf8.js";import{_ as V}from"./AppLayout.e5ea7e92.js";const F=d("\u4FDD\u5B58"),K=d("\u53D6\u6D88"),L=$("div",{id:"editor"},null,-1),x=_({data(){return{name:""}},computed:i({},w(["absolutePath"])),created(){},mounted(){this.loadData(),document.addEventListener("keydown",this.saveKeydown,!1)},beforeRouteLeave(){document.removeEventListener("keydown",this.saveKeydown)},methods:{loadData(){const{name:e}=this.$route.params;if(!e)return this.$router.replace("/");this.name=e;const t=this.absolutePath(e),o=document.querySelector("#editor");o.innerHTML="",C(t).then(({code:n,data:s})=>{n>0||(o.textContent=s,window.editor=window.ace.edit("editor",{theme:"ace/theme/chrome",mode:y(this.name)}),document.body.scrollIntoView())})},cancelClick(){this.$router.back()},saveClick(){const e=this.absolutePath(this.name);let t=window.editor.getValue();D(e,t).then(o=>{this.$toast(o.msg)})},saveKeydown(e){e.ctrlKey&&e.key==="s"&&(this.$toast("\u6B63\u5728\u4FDD\u5B58\u4E2D..."),this.saveClick(),e.preventDefault())}}}),P=_(u(i({},x),{setup(e){return(t,o)=>{const n=h("va-chip"),s=h("va-button");return b(),B(V,{class:"views-editor"},{left:a(()=>[r(n,{flat:"",color:"#fff"},{default:a(()=>[d(g(t.name),1)]),_:1})]),right:a(()=>[r(s,{color:"#fff",flat:"",rounded:!1,onClick:t.saveClick},{default:a(()=>[F]),_:1},8,["onClick"]),r(s,{color:"#fff",flat:"",rounded:!1,onClick:t.cancelClick},{default:a(()=>[K]),_:1},8,["onClick"])]),default:a(()=>[L]),_:1})}}}));export{P as default};
