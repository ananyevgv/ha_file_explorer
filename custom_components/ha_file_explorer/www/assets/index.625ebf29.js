var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var T=(n,o,s)=>o in n?Q(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s,v=(n,o)=>{for(var s in o||(o={}))Y.call(o,s)&&T(n,s,o[s]);if(q)for(var s of q(o))Z.call(o,s)&&T(n,s,o[s]);return n},w=(n,o)=>W(n,X(o));import{d as D,r as z,a,o as c,c as r,w as t,b as e,e as E,f as F,g as V,F as B,h as i,u as K,t as C,i as G,j as tt,m as M,k as H,l as N,n as O,_ as R,p as U}from"./index.c3169090.js";import{_ as et}from"./AppLayout.4e9e47c5.js";const at={class:"va-table"},nt=["href"],ot={key:1},lt=i(" OK "),st=D({props:["ok"],setup(n){const o=n;K();const s="File Explorer",h=z(!0),y=new URLSearchParams(location.search),_=z([{name:"Version",value:y.get("v")||"dev"},{name:"Author",value:"shaonianzhentan"},{name:"Link",value:"https://github.com/shaonianzhentan/ha_file_explorer",type:"link"},{name:"UI",value:"https://vuestic.dev",type:"link"},{name:"Icon",value:"https://unpkg.com/@mdi/font@latest/preview.html",type:"link"},{name:"Bilibili",value:"https://space.bilibili.com/39523884",type:"link"},{name:"HA notes",value:"https://ha.jiluxinqing.com",type:"link"}]),u=async()=>{o.ok({})};return(f,d)=>{const k=a("va-button"),p=a("va-modal");return c(),r(p,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=l=>h.value=l),title:s,"hide-default-actions":!0},{footer:t(()=>[e(k,{onClick:u},{default:t(()=>[lt]),_:1})]),default:t(()=>[E("table",at,[E("tbody",null,[(c(!0),F(B,null,V(_.value,l=>(c(),F("tr",{key:l.name},[E("td",null,C(l.name),1),E("td",null,[l.type==="link"?(c(),F("a",{key:0,href:l.value,target:"_blank"},C(l.value),9,nt)):(c(),F("span",ot,C(l.value),1))])]))),128))])])]),_:1},8,["modelValue"])}}}),ct=i(" \u53D6\u6D88 "),it=i(" \u786E\u5B9A "),_t={},J=D(w(v({},_t),{props:["type","ok","cancel","app"],setup(n){const o=n,s=K(),h=o.type==="file",y=h?"\u6587\u4EF6":"\u6587\u4EF6\u5939",_=o.app(),u=z(""),f=z(!0),d=()=>{o.cancel()},k=async()=>{if(!u.value)return;const p=s.getters.absolutePath(u.value);let l=await tt(h?"file":"folder",p);_.$toast(l.msg),!(l.code>0)&&(s.dispatch("reloadFileList"),o.ok({}))};return(p,l)=>{const b=a("va-input"),$=a("va-button"),x=a("va-modal");return c(),r(x,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=L=>f.value=L),title:G(y),"hide-default-actions":!0},{footer:t(()=>[e($,{outline:"",onClick:d,style:{"margin-right":"20px"}},{default:t(()=>[ct]),_:1}),e($,{onClick:k,style:{"margin-left":"20px"}},{default:t(()=>[it]),_:1})]),default:t(()=>[e(b,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=L=>u.value=L),modelModifiers:{trim:!0},placeholder:`${G(y)}\u540D\u79F0`},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])}}})),ut={computed:v(v({},M(["fileList"])),H(["absolutePath"])),methods:w(v({},N(["reloadFileList"])),{deleteClick(n){parent.confirm(`\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u3010${n}\u3011\uFF1F`)&&O(this.absolutePath(n)).then(o=>{this.reloadFileList(),this.$toast(o.msg)})},editClick(n){this.$router.push({name:"editor",params:{name:n}})},addClick(){this.$dialog(J,{type:"file"})}})},rt=i(" \u6587\u4EF6\u5217\u8868 "),dt=i("\u65B0\u589E"),pt=i("\u5220\u9664"),mt=i("\u7F16\u8F91");function vt(n,o,s,h,y,_){const u=a("va-button"),f=a("va-button-group"),d=a("va-button-dropdown"),k=a("va-card-title"),p=a("mdi-icon"),l=a("va-avatar"),b=a("va-list-item-section"),$=a("va-list-item-label"),x=a("va-chip"),L=a("va-list-item"),A=a("va-list"),P=a("va-card-content"),S=a("va-card");return c(),r(S,null,{default:t(()=>[e(k,null,{default:t(()=>[rt,e(d,{outline:"",size:"small"},{default:t(()=>[e(f,{size:"small"},{default:t(()=>[e(u,{onClick:_.addClick},{default:t(()=>[dt]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(A,{style:{"padding-top":"0"}},{default:t(()=>[(c(!0),F(B,null,V(n.fileList,(g,m)=>(c(),r(L,{key:m},{default:t(()=>[e(b,{avatar:""},{default:t(()=>[e(l,{color:"var(--va-primary)"},{default:t(()=>[e(p,{name:g.icon},null,8,["name"])]),_:2},1024)]),_:2},1024),e(b,null,{default:t(()=>[e($,null,{default:t(()=>[i(C(g.name),1)]),_:2},1024),e($,{caption:""},{default:t(()=>[i(C(g.time)+" ",1),g.size?(c(),r(x,{key:0,flat:"",size:"small"},{default:t(()=>[i(C(g.size),1)]),_:2},1024)):U("",!0)]),_:2},1024)]),_:2},1024),e(b,{icon:""},{default:t(()=>[e(d,{size:"small"},{default:t(()=>[e(f,{outline:"",size:"small"},{default:t(()=>[e(u,{onClick:I=>_.deleteClick(g.name)},{default:t(()=>[pt]),_:2},1032,["onClick"]),e(u,{onClick:I=>_.editClick(g.name)},{default:t(()=>[mt]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var ft=R(ut,[["render",vt]]);const ht={data(){return{brands:new Array}},computed:v(v({},M(["folderList","path"])),H(["pathList"])),methods:w(v({},N(["getFileList"])),{showClick(n){this.getFileList(n.name)},addClick(){this.$dialog(J,{type:"dir"})},deleteClick(){const{pathList:n}=this,{name:o}=n[n.length-1];parent.confirm(`\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5939\u3010${o}\u3011\uFF1F`)&&O(this.path).then(s=>{this.getFileList(n.length-2),this.$toast(s.msg)})},loadSrc(n){return this.brands.includes(n)?"https://brands.home-assistant.io/_/homeassistant/icon.png":n},loadIcon(n,o){this.brands.push(o),n.target.src="https://brands.home-assistant.io/_/homeassistant/icon.png"}})},kt=i(" \u6587\u4EF6\u5939 "),bt=i("\u5220\u9664"),gt=i("\u65B0\u589E"),Ct=["src","onError"];function yt(n,o,s,h,y,_){const u=a("va-button"),f=a("va-button-group"),d=a("va-button-dropdown"),k=a("va-card-title"),p=a("mdi-icon"),l=a("va-avatar"),b=a("va-list-item-section"),$=a("va-list-item-label"),x=a("va-chip"),L=a("va-icon"),A=a("va-list-item"),P=a("va-list"),S=a("va-card-content"),g=a("va-card");return c(),r(g,null,{default:t(()=>[e(k,null,{default:t(()=>[kt,e(d,{outline:"",size:"small"},{default:t(()=>[e(f,{size:"small"},{default:t(()=>[n.pathList.length>1?(c(),r(u,{key:0,onClick:_.deleteClick},{default:t(()=>[bt]),_:1},8,["onClick"])):U("",!0),e(u,{onClick:_.addClick},{default:t(()=>[gt]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(P,{style:{"padding-top":"0"}},{default:t(()=>[(c(!0),F(B,null,V(n.folderList,(m,I)=>(c(),r(A,{key:I},{default:t(()=>[e(b,{avatar:""},{default:t(()=>[m.iconType=="img"?(c(),F("img",{key:0,class:"brands",src:_.loadSrc(m.icon),onError:j=>_.loadIcon(j,m.icon)},null,40,Ct)):(c(),r(l,{key:1,color:"var(--va-primary)"},{default:t(()=>[e(p,{name:m.icon},null,8,["name"])]),_:2},1024))]),_:2},1024),e(b,null,{default:t(()=>[e($,null,{default:t(()=>[i(C(m.name),1)]),_:2},1024),e($,{caption:""},{default:t(()=>[i(C(m.time)+" ",1),m.size?(c(),r(x,{key:0,flat:"",size:"small"},{default:t(()=>[i(C(m.size),1)]),_:2},1024)):U("",!0)]),_:2},1024)]),_:2},1024),e(b,{icon:""},{default:t(()=>[e(L,{name:"remove_red_eye",color:"gray",onClick:j=>_.showClick(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var $t=R(ht,[["render",yt],["__scopeId","data-v-9b3cb692"]]);const Ft=i("\u6587\u4EF6\u7BA1\u7406"),Lt={class:"row"},Et={class:"flex md6"},wt={class:"flex md6"},xt={computed:v({},H(["pathList"])),created(){this.changePathClick(0)},methods:w(v({},N(["getFileList"])),{changePathClick(n){this.getFileList(n)},versionClick(){this.$dialog(st)}})},At=D(w(v({},xt),{setup(n){return(o,s)=>{const h=a("va-button"),y=a("va-breadcrumbs-item"),_=a("va-breadcrumbs"),u=a("va-card-title"),f=a("va-card"),d=a("va-backtop");return c(),r(et,{class:"views-index"},{left:t(()=>[e(h,{color:"#fff",flat:"",rounded:!1,onClick:o.versionClick},{default:t(()=>[Ft]),_:1},8,["onClick"])]),right:t(()=>[]),default:t(()=>[e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(_,null,{default:t(()=>[(c(!0),F(B,null,V(o.pathList,(k,p)=>(c(),r(y,{label:k.name,key:p,href:"#",onClick:l=>o.changePathClick(p)},null,8,["label","onClick"]))),128))]),_:1})]),_:1})]),_:1}),E("div",Lt,[E("div",Et,[e($t)]),E("div",wt,[e(ft)])]),e(d,{target:"#va-app-bar-shadow","vertical-offset":"20px","horizontal-offset":"20px","visibility-height":1,speed:50})]),_:1})}}}));export{At as default};
