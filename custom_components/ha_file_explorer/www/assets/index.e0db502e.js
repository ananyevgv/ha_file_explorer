var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var G=(o,n,s)=>n in o?W(o,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[n]=s,k=(o,n)=>{for(var s in n||(n={}))Z.call(n,s)&&G(o,s,n[s]);if(T)for(var s of T(n))tt.call(n,s)&&G(o,s,n[s]);return o},x=(o,n)=>X(o,Y(n));import{d as U,r as B,a,o as i,c as r,w as t,b as e,e as w,f as $,g as I,F as S,h as u,u as N,t as E,i as A,j as K,k as D,m as M,l as j,n as q,_ as O}from"./index.49f9fd98.js";import{A as et}from"./AppLayout.5b34820b.js";const at={class:"va-table"},ot=["href"],nt={key:1},lt=u(" OK "),st=U({name:"VersionInfo",props:["ok"],setup(o){const n=o;N();const s="File Explorer",p=B(!0),C=new URLSearchParams(location.search),_=B([{name:"Version",value:C.get("v")||"dev"},{name:"Author",value:"shaonianzhentan"},{name:"Link",value:"https://github.com/shaonianzhentan/ha_file_explorer",type:"link"},{name:"UI",value:"https://vuestic.dev",type:"link"},{name:"Icon",value:"https://unpkg.com/@mdi/font@latest/preview.html",type:"link"},{name:"Bilibili",value:"https://space.bilibili.com/39523884",type:"link"},{name:"HA notes",value:"https://ha.jiluxinqing.com",type:"link"}]),c=async()=>{n.ok({})};return(m,v)=>{const b=a("va-button"),f=a("va-modal");return i(),r(f,{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=l=>p.value=l),title:s,"hide-default-actions":!0},{footer:t(()=>[e(b,{onClick:c},{default:t(()=>[lt]),_:1})]),default:t(()=>[w("table",at,[w("tbody",null,[(i(!0),$(S,null,I(_.value,l=>(i(),$("tr",{key:l.name},[w("td",null,E(l.name),1),w("td",null,[l.type==="link"?(i(),$("a",{key:0,href:l.value,target:"_blank"},E(l.value),9,ot)):(i(),$("span",nt,E(l.value),1))])]))),128))])])]),_:1},8,["modelValue"])}}}),it=u(" \u53D6\u6D88 "),ct=u(" \u786E\u5B9A "),ut={},J=U(x(k({},ut),{name:"CreateFile",props:["type","ok","cancel","app"],setup(o){const n=o,s=N(),p=n.type==="file",C=p?"\u6587\u4EF6":"\u6587\u4EF6\u5939",_=n.app(),c=B(""),m=B(!0),v=()=>{n.cancel()},b=async()=>{if(!c.value)return;const f=s.getters.absolutePath(c.value);let l=await K.service.createHassFile(p?"file":"folder",f);_.$toast(l.msg),!(l.code>0)&&(s.dispatch("reloadFileList"),n.ok({}))};return(f,l)=>{const d=a("va-input"),h=a("va-button"),L=a("va-modal");return i(),r(L,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=F=>m.value=F),title:A(C),"hide-default-actions":!0},{footer:t(()=>[e(h,{outline:"",onClick:v,style:{"margin-right":"20px"}},{default:t(()=>[it]),_:1}),e(h,{onClick:b,style:{"margin-left":"20px"}},{default:t(()=>[ct]),_:1})]),default:t(()=>[e(d,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=F=>c.value=F),modelModifiers:{trim:!0},placeholder:`${A(C)}\u540D\u79F0`},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])}}})),_t=u(" \u6CE8\u610F\uFF1A\u76F8\u540C\u540D\u79F0\u6587\u4EF6\u4F1A\u88AB\u8986\u76D6 "),dt=u(" \u53D6\u6D88 "),rt=u(" \u786E\u5B9A "),pt={},Q=U(x(k({},pt),{name:"UploadFile",props:["type","ok","cancel","app"],setup(o){const n=o,s=N(),p=n.type==="file",C=p?"\u4E0A\u4F20\u6587\u4EF6":"\u4E0A\u4F20\u6587\u4EF6\u5939",_=n.app(),c=B([]),m=B(!0),v=l=>{const d=[];for(let h of l.target.files)d.push(h);c.value=d},b=()=>{n.cancel()},f=async()=>{c.value.length!==0&&Promise.all(c.value.map(l=>{const d=s.getters.absolutePath(p?l.name:l.webkitRelativePath);return K.service.uploadFile(d,l)})).then(l=>{_.$toast(`\u6210\u529F\u4E0A\u4F20${l.length}\u6587\u4EF6`),s.dispatch("reloadFileList"),n.ok({})})};return(l,d)=>{const h=a("va-progress-bar"),L=a("va-alert"),F=a("va-file-upload"),z=a("va-button"),P=a("va-modal");return i(),r(P,{modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=V=>m.value=V),title:A(C),"hide-default-actions":!0},{footer:t(()=>[e(z,{disabled:A(s).state.loading,outline:"",onClick:b,style:{"margin-right":"20px"}},{default:t(()=>[dt]),_:1},8,["disabled"]),e(z,{disabled:A(s).state.loading,onClick:f,style:{"margin-left":"20px"}},{default:t(()=>[rt]),_:1},8,["disabled"])]),default:t(()=>[A(s).state.loading?(i(),r(h,{key:0,indeterminate:""})):D("",!0),e(L,{color:"danger",class:"mb-4"},{default:t(()=>[_t]),_:1}),p?(i(),r(F,{key:1,disabled:A(s).state.loading,modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=V=>c.value=V)},null,8,["disabled","modelValue"])):(i(),$("input",{key:2,type:"file",onChange:v,webkitdirectory:""},null,32))]),_:1},8,["modelValue","title"])}}})),mt={computed:k(k({},M(["fileList"])),j(["absolutePath"])),methods:x(k({},q(["reloadFileList"])),{deleteClick(o){parent.confirm(`\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u3010${o}\u3011\uFF1F`)&&this.api.service.deleteHassFile(this.absolutePath(o)).then(n=>{this.reloadFileList(),this.$toast(n.msg)})},editClick(o){this.$router.push({name:"editor",params:{name:o}})},addClick(){this.$dialog(J,{type:"file"})},uploadClick(){this.$dialog(Q,{type:"file"})}})},vt=u(" \u6587\u4EF6\u5217\u8868 "),ft=u("\u4E0A\u4F20"),ht=u("\u65B0\u589E"),kt=u("\u5220\u9664"),bt=u("\u7F16\u8F91");function gt(o,n,s,p,C,_){const c=a("va-button"),m=a("va-button-group"),v=a("va-button-dropdown"),b=a("va-card-title"),f=a("mdi-icon"),l=a("va-avatar"),d=a("va-list-item-section"),h=a("va-list-item-label"),L=a("va-chip"),F=a("va-list-item"),z=a("va-list"),P=a("va-card-content"),V=a("va-card");return i(),r(V,null,{default:t(()=>[e(b,null,{default:t(()=>[vt,e(v,{outline:"",size:"small"},{default:t(()=>[e(m,{size:"small"},{default:t(()=>[e(c,{onClick:_.uploadClick},{default:t(()=>[ft]),_:1},8,["onClick"]),e(c,{onClick:_.addClick},{default:t(()=>[ht]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(z,{style:{"padding-top":"0"}},{default:t(()=>[(i(!0),$(S,null,I(o.fileList,(y,g)=>(i(),r(F,{key:g},{default:t(()=>[e(d,{avatar:""},{default:t(()=>[e(l,{color:"var(--va-primary)"},{default:t(()=>[e(f,{name:y.icon},null,8,["name"])]),_:2},1024)]),_:2},1024),e(d,null,{default:t(()=>[e(h,null,{default:t(()=>[u(E(y.name),1)]),_:2},1024),e(h,{caption:""},{default:t(()=>[u(E(y.time)+" ",1),y.size?(i(),r(L,{key:0,flat:"",size:"small"},{default:t(()=>[u(E(y.size),1)]),_:2},1024)):D("",!0)]),_:2},1024)]),_:2},1024),e(d,{icon:""},{default:t(()=>[e(v,{size:"small"},{default:t(()=>[e(m,{outline:"",size:"small"},{default:t(()=>[e(c,{onClick:H=>_.deleteClick(y.name)},{default:t(()=>[kt]),_:2},1032,["onClick"]),e(c,{onClick:H=>_.editClick(y.name)},{default:t(()=>[bt]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var Ct=O(mt,[["render",gt]]);const Ft={data(){return{brands:new Array}},computed:k(k({},M(["folderList","path"])),j(["pathList"])),methods:x(k({},q(["getFileList"])),{showClick(o){this.getFileList(o.name)},addClick(){this.$dialog(J,{type:"dir"})},uploadClick(){this.$dialog(Q,{type:"dir"})},deleteClick(){const{pathList:o}=this,{name:n}=o[o.length-1];parent.confirm(`\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5939\u3010${n}\u3011\uFF1F`)&&this.api.service.deleteHassFile(this.path).then(s=>{this.getFileList(o.length-2),this.$toast(s.msg)})},loadSrc(o){return this.brands.includes(o)?"https://brands.home-assistant.io/_/homeassistant/icon.png":o},loadIcon(o,n){this.brands.push(n),o.target.src="https://brands.home-assistant.io/_/homeassistant/icon.png"}})},yt=u(" \u6587\u4EF6\u5939 "),$t=u("\u4E0A\u4F20"),Et=u("\u5220\u9664"),Lt=u("\u65B0\u589E"),Vt=["src","onError"];function xt(o,n,s,p,C,_){const c=a("va-button"),m=a("va-button-group"),v=a("va-button-dropdown"),b=a("va-card-title"),f=a("mdi-icon"),l=a("va-avatar"),d=a("va-list-item-section"),h=a("va-list-item-label"),L=a("va-chip"),F=a("va-icon"),z=a("va-list-item"),P=a("va-list"),V=a("va-card-content"),y=a("va-card");return i(),r(y,null,{default:t(()=>[e(b,null,{default:t(()=>[yt,e(v,{outline:"",size:"small"},{default:t(()=>[e(m,{size:"small"},{default:t(()=>[e(c,{onClick:_.uploadClick},{default:t(()=>[$t]),_:1},8,["onClick"]),o.pathList.length>1?(i(),r(c,{key:0,onClick:_.deleteClick},{default:t(()=>[Et]),_:1},8,["onClick"])):D("",!0),e(c,{onClick:_.addClick},{default:t(()=>[Lt]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(P,{style:{"padding-top":"0"}},{default:t(()=>[(i(!0),$(S,null,I(o.folderList,(g,H)=>(i(),r(z,{key:H},{default:t(()=>[e(d,{avatar:""},{default:t(()=>[g.iconType=="img"?(i(),$("img",{key:0,class:"brands",src:_.loadSrc(g.icon),onError:R=>_.loadIcon(R,g.icon)},null,40,Vt)):(i(),r(l,{key:1,color:"var(--va-primary)"},{default:t(()=>[e(f,{name:g.icon},null,8,["name"])]),_:2},1024))]),_:2},1024),e(d,null,{default:t(()=>[e(h,null,{default:t(()=>[u(E(g.name),1)]),_:2},1024),e(h,{caption:""},{default:t(()=>[u(E(g.time)+" ",1),g.size?(i(),r(L,{key:0,flat:"",size:"small"},{default:t(()=>[u(E(g.size),1)]),_:2},1024)):D("",!0)]),_:2},1024)]),_:2},1024),e(d,{icon:""},{default:t(()=>[e(F,{name:"remove_red_eye",color:"gray",onClick:R=>_.showClick(g)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var At=O(Ft,[["render",xt],["__scopeId","data-v-1381b144"]]);const wt=u("\u6587\u4EF6\u7BA1\u7406"),zt={class:"row"},Bt={class:"flex md6"},Pt={class:"flex md6"},Dt={computed:k({},j(["pathList"])),created(){this.changePathClick(0)},methods:x(k({},q(["getFileList"])),{changePathClick(o){this.getFileList(o)},versionClick(){this.$dialog(st)}})},Ht=U(x(k({},Dt),{name:"index",setup(o){return(n,s)=>{const p=a("va-button"),C=a("va-breadcrumbs-item"),_=a("va-breadcrumbs"),c=a("va-card-title"),m=a("va-card"),v=a("va-backtop");return i(),r(et,{class:"views-index"},{left:t(()=>[e(p,{color:"#fff",flat:"",rounded:!1,onClick:n.versionClick},{default:t(()=>[wt]),_:1},8,["onClick"])]),right:t(()=>[]),default:t(()=>[e(m,null,{default:t(()=>[e(c,null,{default:t(()=>[e(_,null,{default:t(()=>[(i(!0),$(S,null,I(n.pathList,(b,f)=>(i(),r(C,{label:b.name,key:f,onClick:l=>n.changePathClick(f)},null,8,["label","onClick"]))),128))]),_:1})]),_:1})]),_:1}),w("div",zt,[w("div",Bt,[e(At)]),w("div",Pt,[e(Ct)])]),e(v,{target:"#va-app-bar-shadow","vertical-offset":"20px","horizontal-offset":"20px","visibility-height":1,speed:50})]),_:1})}}}));export{Ht as default};
